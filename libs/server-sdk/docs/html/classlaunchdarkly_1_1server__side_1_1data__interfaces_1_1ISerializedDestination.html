<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>C++ Server-Side SDK: launchdarkly::server_side::data_interfaces::ISerializedDestination Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">C++ Server-Side SDK
   </div>
   <div id="projectbrief">LaunchDarkly SDK</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>launchdarkly</b></li><li class="navelem"><b>server_side</b></li><li class="navelem"><b>data_interfaces</b></li><li class="navelem"><a class="el" href="classlaunchdarkly_1_1server__side_1_1data__interfaces_1_1ISerializedDestination.html">ISerializedDestination</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classlaunchdarkly_1_1server__side_1_1data__interfaces_1_1ISerializedDestination-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">launchdarkly::server_side::data_interfaces::ISerializedDestination Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div></div>
</div><!--header-->
<div class="contents">

<p>This interface is used for persisting data to databases, or any other component that can store feature flag / segment data.  
 <a href="classlaunchdarkly_1_1server__side_1_1data__interfaces_1_1ISerializedDestination.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="iserialized__destination_8hpp_source.html">iserialized_destination.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:ac1c7597c422bc6d8aa412926191c608f" id="r_ac1c7597c422bc6d8aa412926191c608f"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlaunchdarkly_1_1server__side_1_1data__interfaces_1_1ISerializedDestination.html#ac1c7597c422bc6d8aa412926191c608f">InitResult</a> { <a class="el" href="classlaunchdarkly_1_1server__side_1_1data__interfaces_1_1ISerializedDestination.html#ac1c7597c422bc6d8aa412926191c608fa8c632159fa131f09d04f94e3cbcd8782">kSuccess</a>
, <a class="el" href="classlaunchdarkly_1_1server__side_1_1data__interfaces_1_1ISerializedDestination.html#ac1c7597c422bc6d8aa412926191c608fae3587c730cc1aa530fa4ddc9c4204e97">kError</a>
 }</td></tr>
<tr class="separator:ac1c7597c422bc6d8aa412926191c608f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40ca53aeddc40e2458d4e9ef0bb600ae" id="r_a40ca53aeddc40e2458d4e9ef0bb600ae"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlaunchdarkly_1_1server__side_1_1data__interfaces_1_1ISerializedDestination.html#a40ca53aeddc40e2458d4e9ef0bb600ae">UpsertResult</a> { <a class="el" href="classlaunchdarkly_1_1server__side_1_1data__interfaces_1_1ISerializedDestination.html#a40ca53aeddc40e2458d4e9ef0bb600aea8c632159fa131f09d04f94e3cbcd8782">kSuccess</a>
, <a class="el" href="classlaunchdarkly_1_1server__side_1_1data__interfaces_1_1ISerializedDestination.html#a40ca53aeddc40e2458d4e9ef0bb600aeae3587c730cc1aa530fa4ddc9c4204e97">kError</a>
, <a class="el" href="classlaunchdarkly_1_1server__side_1_1data__interfaces_1_1ISerializedDestination.html#a40ca53aeddc40e2458d4e9ef0bb600aea9712af4cb7593726d30738fe3e9750e2">kNotUpdated</a>
 }</td></tr>
<tr class="separator:a40ca53aeddc40e2458d4e9ef0bb600ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46f1013f4cafff6b94dba195d22d9dec" id="r_a46f1013f4cafff6b94dba195d22d9dec"><td class="memItemLeft" align="right" valign="top"><a id="a46f1013f4cafff6b94dba195d22d9dec" name="a46f1013f4cafff6b94dba195d22d9dec"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>Key</b> = std::string</td></tr>
<tr class="separator:a46f1013f4cafff6b94dba195d22d9dec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d596a2f8a09a09cadd3b284e2d1921c" id="r_a5d596a2f8a09a09cadd3b284e2d1921c"><td class="memTemplParams" colspan="2"><a id="a5d596a2f8a09a09cadd3b284e2d1921c" name="a5d596a2f8a09a09cadd3b284e2d1921c"></a>
template&lt;typename T &gt; </td></tr>
<tr class="memitem:a5d596a2f8a09a09cadd3b284e2d1921c"><td class="memTemplItemLeft" align="right" valign="top">using&#160;</td><td class="memTemplItemRight" valign="bottom"><b>Keyed</b> = std::pair&lt; Key, T &gt;</td></tr>
<tr class="separator:a5d596a2f8a09a09cadd3b284e2d1921c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab2165fa9f841f00a99bb4d0c4ca561e" id="r_aab2165fa9f841f00a99bb4d0c4ca561e"><td class="memItemLeft" align="right" valign="top"><a id="aab2165fa9f841f00a99bb4d0c4ca561e" name="aab2165fa9f841f00a99bb4d0c4ca561e"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>OrderedNamepace</b> = std::vector&lt; Keyed&lt; <a class="el" href="structlaunchdarkly_1_1server__side_1_1integrations_1_1SerializedItemDescriptor.html">integrations::SerializedItemDescriptor</a> &gt; &gt;</td></tr>
<tr class="separator:aab2165fa9f841f00a99bb4d0c4ca561e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a696cd954aaf532e7227809b9eb972e75" id="r_a696cd954aaf532e7227809b9eb972e75"><td class="memItemLeft" align="right" valign="top"><a id="a696cd954aaf532e7227809b9eb972e75" name="a696cd954aaf532e7227809b9eb972e75"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>ItemCollection</b> = std::pair&lt; <a class="el" href="classlaunchdarkly_1_1server__side_1_1integrations_1_1ISerializedItemKind.html">integrations::ISerializedItemKind</a> const  &amp;, OrderedNamepace &gt;</td></tr>
<tr class="separator:a696cd954aaf532e7227809b9eb972e75"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a7916bfd384affc766e393f924cf1b169" id="r_a7916bfd384affc766e393f924cf1b169"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classlaunchdarkly_1_1server__side_1_1data__interfaces_1_1ISerializedDestination.html#ac1c7597c422bc6d8aa412926191c608f">InitResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlaunchdarkly_1_1server__side_1_1data__interfaces_1_1ISerializedDestination.html#a7916bfd384affc766e393f924cf1b169">Init</a> (std::vector&lt; ItemCollection &gt; sdk_data_set)=0</td></tr>
<tr class="memdesc:a7916bfd384affc766e393f924cf1b169"><td class="mdescLeft">&#160;</td><td class="mdescRight">Overwrites the Destination's contents with a set of items for each collection. All previous data should be disgraded regardless of versioning.  <br /></td></tr>
<tr class="separator:a7916bfd384affc766e393f924cf1b169"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae266b678249b8e553e18604cfca80a40" id="r_ae266b678249b8e553e18604cfca80a40"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classlaunchdarkly_1_1server__side_1_1data__interfaces_1_1ISerializedDestination.html#a40ca53aeddc40e2458d4e9ef0bb600ae">UpsertResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlaunchdarkly_1_1server__side_1_1data__interfaces_1_1ISerializedDestination.html#ae266b678249b8e553e18604cfca80a40">Upsert</a> (<a class="el" href="classlaunchdarkly_1_1server__side_1_1integrations_1_1ISerializedItemKind.html">integrations::ISerializedItemKind</a> const &amp;kind, std::string const &amp;key, <a class="el" href="structlaunchdarkly_1_1server__side_1_1integrations_1_1SerializedItemDescriptor.html">integrations::SerializedItemDescriptor</a> item)=0</td></tr>
<tr class="memdesc:ae266b678249b8e553e18604cfca80a40"><td class="mdescLeft">&#160;</td><td class="mdescRight">Upserts a single item (update if exist, insert if not.)  <br /></td></tr>
<tr class="separator:ae266b678249b8e553e18604cfca80a40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f3aa0e643eaab0f8c440edcda23141f" id="r_a2f3aa0e643eaab0f8c440edcda23141f"><td class="memItemLeft" align="right" valign="top">virtual std::string const &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlaunchdarkly_1_1server__side_1_1data__interfaces_1_1ISerializedDestination.html#a2f3aa0e643eaab0f8c440edcda23141f">Identity</a> () const =0</td></tr>
<tr class="separator:a2f3aa0e643eaab0f8c440edcda23141f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e72ecdd4b261c74251aa23e95acf3f4" id="r_a1e72ecdd4b261c74251aa23e95acf3f4"><td class="memItemLeft" align="right" valign="top"><a id="a1e72ecdd4b261c74251aa23e95acf3f4" name="a1e72ecdd4b261c74251aa23e95acf3f4"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>ISerializedDestination</b> (<a class="el" href="classlaunchdarkly_1_1server__side_1_1data__interfaces_1_1ISerializedDestination.html">ISerializedDestination</a> const &amp;item)=delete</td></tr>
<tr class="separator:a1e72ecdd4b261c74251aa23e95acf3f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdb537a3e8550d49a11a229952bba364" id="r_acdb537a3e8550d49a11a229952bba364"><td class="memItemLeft" align="right" valign="top"><a id="acdb537a3e8550d49a11a229952bba364" name="acdb537a3e8550d49a11a229952bba364"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>ISerializedDestination</b> (<a class="el" href="classlaunchdarkly_1_1server__side_1_1data__interfaces_1_1ISerializedDestination.html">ISerializedDestination</a> &amp;&amp;item)=delete</td></tr>
<tr class="separator:acdb537a3e8550d49a11a229952bba364"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5aaaf44c8236a9ddc86455d7a8475478" id="r_a5aaaf44c8236a9ddc86455d7a8475478"><td class="memItemLeft" align="right" valign="top"><a id="a5aaaf44c8236a9ddc86455d7a8475478" name="a5aaaf44c8236a9ddc86455d7a8475478"></a>
<a class="el" href="classlaunchdarkly_1_1server__side_1_1data__interfaces_1_1ISerializedDestination.html">ISerializedDestination</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (<a class="el" href="classlaunchdarkly_1_1server__side_1_1data__interfaces_1_1ISerializedDestination.html">ISerializedDestination</a> const &amp;)=delete</td></tr>
<tr class="separator:a5aaaf44c8236a9ddc86455d7a8475478"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1c516a02424470c4fa22a04955dbfde" id="r_ab1c516a02424470c4fa22a04955dbfde"><td class="memItemLeft" align="right" valign="top"><a id="ab1c516a02424470c4fa22a04955dbfde" name="ab1c516a02424470c4fa22a04955dbfde"></a>
<a class="el" href="classlaunchdarkly_1_1server__side_1_1data__interfaces_1_1ISerializedDestination.html">ISerializedDestination</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (<a class="el" href="classlaunchdarkly_1_1server__side_1_1data__interfaces_1_1ISerializedDestination.html">ISerializedDestination</a> &amp;&amp;)=delete</td></tr>
<tr class="separator:ab1c516a02424470c4fa22a04955dbfde"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This interface is used for persisting data to databases, or any other component that can store feature flag / segment data. </p>
<p>The SDK automatically converts between its in-memory data model and a serialized string form, which is what this interface interacts with.</p>
<p>Each item in the store is conceptually a SerializedItemDescriptor containing a version and the serialized form. The serialized form might represent a flag/segment, or a "tombstone" representing the (absence) of an item.</p>
<p>It's possible to satisfy the interface in two ways:</p>
<ol type="1">
<li>The Destination can store the version number, deleted state, and item separately. This is preferred because it avoids the need to deserialize the entire item just to inspect the version/deleted state when performing an Upsert operation. If implementing this strategy, the Destination may ignore deleted SerializeItemDescriptor's serializedItem members on Upserts.</li>
<li>If there's no way to store the version number, deleted state, and item separately in an efficient way, then the store may instead persist the serializedItem as-is during an Upsert. The item will contain a "tombstone" representation which the SDK will later use to determine if the item is deleted or not. </li>
</ol>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="ac1c7597c422bc6d8aa412926191c608f" name="ac1c7597c422bc6d8aa412926191c608f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac1c7597c422bc6d8aa412926191c608f">&#9670;&#160;</a></span>InitResult</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum class <a class="el" href="classlaunchdarkly_1_1server__side_1_1data__interfaces_1_1ISerializedDestination.html#ac1c7597c422bc6d8aa412926191c608f">launchdarkly::server_side::data_interfaces::ISerializedDestination::InitResult</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ac1c7597c422bc6d8aa412926191c608fa8c632159fa131f09d04f94e3cbcd8782" name="ac1c7597c422bc6d8aa412926191c608fa8c632159fa131f09d04f94e3cbcd8782"></a>kSuccess&#160;</td><td class="fielddoc"><p>The init operation completed successfully. </p>
</td></tr>
<tr><td class="fieldname"><a id="ac1c7597c422bc6d8aa412926191c608fae3587c730cc1aa530fa4ddc9c4204e97" name="ac1c7597c422bc6d8aa412926191c608fae3587c730cc1aa530fa4ddc9c4204e97"></a>kError&#160;</td><td class="fielddoc"><p>There was an error with the init operation. </p>
</td></tr>
</table>

</div>
</div>
<a id="a40ca53aeddc40e2458d4e9ef0bb600ae" name="a40ca53aeddc40e2458d4e9ef0bb600ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40ca53aeddc40e2458d4e9ef0bb600ae">&#9670;&#160;</a></span>UpsertResult</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum class <a class="el" href="classlaunchdarkly_1_1server__side_1_1data__interfaces_1_1ISerializedDestination.html#a40ca53aeddc40e2458d4e9ef0bb600ae">launchdarkly::server_side::data_interfaces::ISerializedDestination::UpsertResult</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a40ca53aeddc40e2458d4e9ef0bb600aea8c632159fa131f09d04f94e3cbcd8782" name="a40ca53aeddc40e2458d4e9ef0bb600aea8c632159fa131f09d04f94e3cbcd8782"></a>kSuccess&#160;</td><td class="fielddoc"><p>The upsert completed successfully. </p>
</td></tr>
<tr><td class="fieldname"><a id="a40ca53aeddc40e2458d4e9ef0bb600aeae3587c730cc1aa530fa4ddc9c4204e97" name="a40ca53aeddc40e2458d4e9ef0bb600aeae3587c730cc1aa530fa4ddc9c4204e97"></a>kError&#160;</td><td class="fielddoc"><p>There was an error with the upsert operation. </p>
</td></tr>
<tr><td class="fieldname"><a id="a40ca53aeddc40e2458d4e9ef0bb600aea9712af4cb7593726d30738fe3e9750e2" name="a40ca53aeddc40e2458d4e9ef0bb600aea9712af4cb7593726d30738fe3e9750e2"></a>kNotUpdated&#160;</td><td class="fielddoc"><p>The upsert did not encounter errors, but the version of the existing item was greater than that the version of the upsert item. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a2f3aa0e643eaab0f8c440edcda23141f" name="a2f3aa0e643eaab0f8c440edcda23141f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f3aa0e643eaab0f8c440edcda23141f">&#9670;&#160;</a></span>Identity()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual std::string const  &amp; launchdarkly::server_side::data_interfaces::ISerializedDestination::Identity </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>Identity of the destination. Used in logs. </dd></dl>

</div>
</div>
<a id="a7916bfd384affc766e393f924cf1b169" name="a7916bfd384affc766e393f924cf1b169"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7916bfd384affc766e393f924cf1b169">&#9670;&#160;</a></span>Init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classlaunchdarkly_1_1server__side_1_1data__interfaces_1_1ISerializedDestination.html#ac1c7597c422bc6d8aa412926191c608f">InitResult</a> launchdarkly::server_side::data_interfaces::ISerializedDestination::Init </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; ItemCollection &gt;&#160;</td>
          <td class="paramname"><em>sdk_data_set</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Overwrites the Destination's contents with a set of items for each collection. All previous data should be disgraded regardless of versioning. </p>
<p>The update should be done atomically. If that's not possible, the store must first add or update each item in the same order that they are given in the input data, and then delete any previously stored items that were not in the input data.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sdk_data_set</td><td>A series of collections, where each collection is named by an ISerializedItemKind and contains a list of key/value pairs representing the key of the item and the serialized form of the item. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="classlaunchdarkly_1_1server__side_1_1data__interfaces_1_1ISerializedDestination.html#ac1c7597c422bc6d8aa412926191c608fa8c632159fa131f09d04f94e3cbcd8782">InitResult::kSuccess</a> if all data items were stored, or <a class="el" href="classlaunchdarkly_1_1server__side_1_1data__interfaces_1_1ISerializedDestination.html#ac1c7597c422bc6d8aa412926191c608fae3587c730cc1aa530fa4ddc9c4204e97">InitResult::kError</a> if any error occoured. </dd></dl>

</div>
</div>
<a id="ae266b678249b8e553e18604cfca80a40" name="ae266b678249b8e553e18604cfca80a40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae266b678249b8e553e18604cfca80a40">&#9670;&#160;</a></span>Upsert()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classlaunchdarkly_1_1server__side_1_1data__interfaces_1_1ISerializedDestination.html#a40ca53aeddc40e2458d4e9ef0bb600ae">UpsertResult</a> launchdarkly::server_side::data_interfaces::ISerializedDestination::Upsert </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classlaunchdarkly_1_1server__side_1_1integrations_1_1ISerializedItemKind.html">integrations::ISerializedItemKind</a> const &amp;&#160;</td>
          <td class="paramname"><em>kind</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string const &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structlaunchdarkly_1_1server__side_1_1integrations_1_1SerializedItemDescriptor.html">integrations::SerializedItemDescriptor</a>&#160;</td>
          <td class="paramname"><em>item</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Upserts a single item (update if exist, insert if not.) </p>
<p>If the given key already exists in the collection named by kind, then the Destination must check the version number corresponding to that key. Note that the item corresponding to that key may be a tombstone representing an absent item.</p>
<p>If the version of the existing item is &gt;= the version of the new item, return <a class="el" href="classlaunchdarkly_1_1server__side_1_1data__interfaces_1_1ISerializedDestination.html#a40ca53aeddc40e2458d4e9ef0bb600aea9712af4cb7593726d30738fe3e9750e2">UpsertResult::kNotUpdated</a>. If the Destination can't determine the version number of the existing item without full deserialization, then it may call <a class="el" href="classlaunchdarkly_1_1server__side_1_1integrations_1_1ISerializedItemKind.html#adc4a77ceecf2f835a30467095327ef8c">integrations::ISerializedItemKind::Version</a> on the data to obtain it.</p>
<p>If the given item's deleted flag is true, the Destination must persist this fact. It can either store a tombstone (value of serializedItem), or if deletion state is stored separate from the item, it can use that mechanism. In any case, it should not delete/forget about the item.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">kind</td><td>The item kind. </td></tr>
    <tr><td class="paramname">key</td><td>The item key. </td></tr>
    <tr><td class="paramname">item</td><td>Serialized form of the item. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="classlaunchdarkly_1_1server__side_1_1data__interfaces_1_1ISerializedDestination.html#a40ca53aeddc40e2458d4e9ef0bb600aea8c632159fa131f09d04f94e3cbcd8782">UpsertResult::kSuccess</a> if the operation was successful. <a class="el" href="classlaunchdarkly_1_1server__side_1_1data__interfaces_1_1ISerializedDestination.html#a40ca53aeddc40e2458d4e9ef0bb600aeae3587c730cc1aa530fa4ddc9c4204e97">UpsertResult::kError</a> if an error occured. Otherwise, <a class="el" href="classlaunchdarkly_1_1server__side_1_1data__interfaces_1_1ISerializedDestination.html#a40ca53aeddc40e2458d4e9ef0bb600aea9712af4cb7593726d30738fe3e9750e2">UpsertResult::kNotUpdated</a> if the existing item version was greater than the version passed in. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/data_interfaces/destination/<a class="el" href="iserialized__destination_8hpp_source.html">iserialized_destination.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
