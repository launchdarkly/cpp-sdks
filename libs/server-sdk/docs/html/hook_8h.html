<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>C++ Server-Side SDK: include/launchdarkly/server_side/bindings/c/hook.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">C++ Server-Side SDK
   </div>
   <div id="projectbrief">LaunchDarkly SDK</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_64935be2e6acbe67e7af58c3c88223ed.html">include</a></li><li class="navelem"><a class="el" href="dir_560c1b3961203e445a6c2c50c3f15f14.html">launchdarkly</a></li><li class="navelem"><a class="el" href="dir_f677846bdc19df54f381069c4df32a9f.html">server_side</a></li><li class="navelem"><a class="el" href="dir_b4935c656ffc5535bf70491b2b27afa7.html">bindings</a></li><li class="navelem"><a class="el" href="dir_13b523482d186c9527fb1838247a5093.html">c</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">hook.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>C bindings for LaunchDarkly SDK hooks.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="export_8h_source.html">launchdarkly/bindings/c/export.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="evaluation__detail_8h_source.html">launchdarkly/bindings/c/data/evaluation_detail.h</a>&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for hook.h:</div>
<div class="dyncontent">
<div class="center"><img src="hook_8h__incl.png" border="0" usemap="#ainclude_2launchdarkly_2server__side_2bindings_2c_2hook_8h" alt=""/></div>
<map name="ainclude_2launchdarkly_2server__side_2bindings_2c_2hook_8h" id="ainclude_2launchdarkly_2server__side_2bindings_2c_2hook_8h">
<area shape="rect" title="C bindings for LaunchDarkly SDK hooks." alt="" coords="75,5,235,61"/>
<area shape="rect" href="export_8h.html" title="Export macros for C bindings." alt="" coords="5,199,171,240"/>
<area shape="rect" href="evaluation__detail_8h.html" title=" " alt="" coords="125,109,320,151"/>
<area shape="rect" title=" " alt="" coords="195,206,269,233"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="hook_8h__dep__incl.png" border="0" usemap="#ainclude_2launchdarkly_2server__side_2bindings_2c_2hook_8hdep" alt=""/></div>
<map name="ainclude_2launchdarkly_2server__side_2bindings_2c_2hook_8hdep" id="ainclude_2launchdarkly_2server__side_2bindings_2c_2hook_8hdep">
<area shape="rect" title="C bindings for LaunchDarkly SDK hooks." alt="" coords="93,5,253,61"/>
<area shape="rect" href="server-sdk_2include_2launchdarkly_2server__side_2bindings_2c_2config_2builder_8h.html" title=" " alt="" coords="5,109,165,165"/>
<area shape="rect" href="hook__wrapper_8hpp.html" title="C++ wrapper that bridges C hook callbacks to C++ Hook interface." alt="" coords="189,117,336,158"/>
<area shape="rect" href="sdk_8h.html" title="LaunchDarkly Server&#45;side C Bindings." alt="" coords="5,213,165,269"/>
</map>
</div>
</div>
<p><a href="hook_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structLDServerSDKHook.html">LDServerSDKHook</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hook structure containing callback function pointers.  <a href="structLDServerSDKHook.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:af93dc706a084025c65a3f9a9265d7637"><td class="memItemLeft" align="right" valign="top"><a id="af93dc706a084025c65a3f9a9265d7637"></a>
typedef struct p_LDServerSDKEvaluationSeriesContext *&#160;</td><td class="memItemRight" valign="bottom"><b>LDServerSDKEvaluationSeriesContext</b></td></tr>
<tr class="separator:af93dc706a084025c65a3f9a9265d7637"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6502d002c9b78204e71e5eda1ec07b13"><td class="memItemLeft" align="right" valign="top"><a id="a6502d002c9b78204e71e5eda1ec07b13"></a>
typedef struct p_LDServerSDKEvaluationSeriesData *&#160;</td><td class="memItemRight" valign="bottom"><b>LDServerSDKEvaluationSeriesData</b></td></tr>
<tr class="separator:a6502d002c9b78204e71e5eda1ec07b13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff654afc010c287a463c77d452d2dcb9"><td class="memItemLeft" align="right" valign="top"><a id="aff654afc010c287a463c77d452d2dcb9"></a>
typedef struct p_LDServerSDKTrackSeriesContext *&#160;</td><td class="memItemRight" valign="bottom"><b>LDServerSDKTrackSeriesContext</b></td></tr>
<tr class="separator:aff654afc010c287a463c77d452d2dcb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a134fe11f56a8d62199173f85cb2b8e32"><td class="memItemLeft" align="right" valign="top">typedef LDServerSDKEvaluationSeriesData(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hook_8h.html#a134fe11f56a8d62199173f85cb2b8e32">LDServerSDKHook_BeforeEvaluation</a>) (LDServerSDKEvaluationSeriesContext series_context, LDServerSDKEvaluationSeriesData data, void *user_data)</td></tr>
<tr class="memdesc:a134fe11f56a8d62199173f85cb2b8e32"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback invoked before a flag evaluation.  <a href="hook_8h.html#a134fe11f56a8d62199173f85cb2b8e32">More...</a><br /></td></tr>
<tr class="separator:a134fe11f56a8d62199173f85cb2b8e32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abaa1e42a79858fd16e90750e4a6f409a"><td class="memItemLeft" align="right" valign="top">typedef LDServerSDKEvaluationSeriesData(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hook_8h.html#abaa1e42a79858fd16e90750e4a6f409a">LDServerSDKHook_AfterEvaluation</a>) (LDServerSDKEvaluationSeriesContext series_context, LDServerSDKEvaluationSeriesData data, LDEvalDetail detail, void *user_data)</td></tr>
<tr class="memdesc:abaa1e42a79858fd16e90750e4a6f409a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback invoked after a flag evaluation.  <a href="hook_8h.html#abaa1e42a79858fd16e90750e4a6f409a">More...</a><br /></td></tr>
<tr class="separator:abaa1e42a79858fd16e90750e4a6f409a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa859599d6d2684d7fea5e6b06d12ceab"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hook_8h.html#aa859599d6d2684d7fea5e6b06d12ceab">LDServerSDKHook_AfterTrack</a>) (LDServerSDKTrackSeriesContext series_context, void *user_data)</td></tr>
<tr class="memdesc:aa859599d6d2684d7fea5e6b06d12ceab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback invoked after a track event.  <a href="hook_8h.html#aa859599d6d2684d7fea5e6b06d12ceab">More...</a><br /></td></tr>
<tr class="separator:aa859599d6d2684d7fea5e6b06d12ceab"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a2d30cbc6e7ee6d129231b6f36cc608b9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hook_8h.html#a2d30cbc6e7ee6d129231b6f36cc608b9">LDServerSDKHook_Init</a> (struct <a class="el" href="structLDServerSDKHook.html">LDServerSDKHook</a> *hook)</td></tr>
<tr class="memdesc:a2d30cbc6e7ee6d129231b6f36cc608b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize a hook structure to safe defaults.  <a href="hook_8h.html#a2d30cbc6e7ee6d129231b6f36cc608b9">More...</a><br /></td></tr>
<tr class="separator:a2d30cbc6e7ee6d129231b6f36cc608b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>C bindings for LaunchDarkly SDK hooks. </p>
<p>Hooks allow you to instrument the SDK's evaluation and tracking behavior for purposes like logging, analytics, or distributed tracing (e.g. OpenTelemetry).</p>
<p>LIFETIME AND OWNERSHIP:</p><ul>
<li>The <a class="el" href="structLDServerSDKHook.html" title="Hook structure containing callback function pointers.">LDServerSDKHook</a> struct should be allocated by the caller (stack or heap)</li>
<li>The function pointers and UserData pointer are copied when the hook is registered with the config builder</li>
<li>UserData lifetime must extend for the entire lifetime of the SDK client</li>
<li>All context parameters passed to callbacks are temporary - valid only during the callback execution</li>
<li>EvaluationSeriesData returned from callbacks transfers ownership to the SDK </li>
</ul>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a id="abaa1e42a79858fd16e90750e4a6f409a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abaa1e42a79858fd16e90750e4a6f409a">&#9670;&nbsp;</a></span>LDServerSDKHook_AfterEvaluation</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef LDServerSDKEvaluationSeriesData(* LDServerSDKHook_AfterEvaluation) (LDServerSDKEvaluationSeriesContext series_context, LDServerSDKEvaluationSeriesData data, LDEvalDetail detail, void *user_data)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback invoked after a flag evaluation. </p>
<p>Use this to instrument evaluation results, such as ending a span for distributed tracing or logging the result.</p>
<p>PARAMETERS: </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">series_context</td><td>Read-only context about the evaluation. Valid only during this callback. </td></tr>
    <tr><td class="paramname">data</td><td>Mutable data passed from beforeEvaluation. Ownership transfers to SDK. May contain data from previous stages. </td></tr>
    <tr><td class="paramname">detail</td><td>The evaluation result. Valid only during this callback. </td></tr>
    <tr><td class="paramname">user_data</td><td>Application-specific context pointer.</td></tr>
  </table>
  </dd>
</dl>
<p>RETURNS: EvaluationSeriesData for potential future stages. Return the input data unmodified if you don't need to modify it. Ownership transfers to SDK. If NULL is returned, an empty data object will be created.</p>
<p>LIFETIME:</p><ul>
<li>series_context: Valid only during callback execution</li>
<li>data: Ownership transfers to SDK</li>
<li>detail: Valid only during callback execution</li>
<li>user_data: Managed by caller </li>
</ul>

</div>
</div>
<a id="aa859599d6d2684d7fea5e6b06d12ceab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa859599d6d2684d7fea5e6b06d12ceab">&#9670;&nbsp;</a></span>LDServerSDKHook_AfterTrack</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* LDServerSDKHook_AfterTrack) (LDServerSDKTrackSeriesContext series_context, void *user_data)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback invoked after a track event. </p>
<p>Use this to instrument custom events, such as logging or adding tracing information.</p>
<p>PARAMETERS: </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">series_context</td><td>Read-only context about the track call. Valid only during this callback. </td></tr>
    <tr><td class="paramname">user_data</td><td>Application-specific context pointer.</td></tr>
  </table>
  </dd>
</dl>
<p>RETURNS: void (no data is passed between track stages)</p>
<p>LIFETIME:</p><ul>
<li>series_context: Valid only during callback execution</li>
<li>user_data: Managed by caller </li>
</ul>

</div>
</div>
<a id="a134fe11f56a8d62199173f85cb2b8e32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a134fe11f56a8d62199173f85cb2b8e32">&#9670;&nbsp;</a></span>LDServerSDKHook_BeforeEvaluation</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef LDServerSDKEvaluationSeriesData(* LDServerSDKHook_BeforeEvaluation) (LDServerSDKEvaluationSeriesContext series_context, LDServerSDKEvaluationSeriesData data, void *user_data)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback invoked before a flag evaluation. </p>
<p>Use this to instrument evaluations, such as starting a span for distributed tracing.</p>
<p>PARAMETERS: </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">series_context</td><td>Read-only context about the evaluation. Valid only during this callback. </td></tr>
    <tr><td class="paramname">data</td><td>Mutable data that can be passed to afterEvaluation. Ownership transfers to the SDK. May be NULL initially. </td></tr>
    <tr><td class="paramname">user_data</td><td>Application-specific context pointer set when creating the hook.</td></tr>
  </table>
  </dd>
</dl>
<p>RETURNS: EvaluationSeriesData to pass to afterEvaluation. Return the input data unmodified if you don't need to add anything. Ownership transfers to SDK. If NULL is returned, an empty data object will be created.</p>
<p>LIFETIME:</p><ul>
<li>series_context: Valid only during callback execution - do not store</li>
<li>data: Ownership transfers to SDK</li>
<li>user_data: Managed by caller - must remain valid for SDK lifetime </li>
</ul>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a2d30cbc6e7ee6d129231b6f36cc608b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d30cbc6e7ee6d129231b6f36cc608b9">&#9670;&nbsp;</a></span>LDServerSDKHook_Init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LDServerSDKHook_Init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structLDServerSDKHook.html">LDServerSDKHook</a> *&#160;</td>
          <td class="paramname"><em>hook</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize a hook structure to safe defaults. </p>
<p>Sets all function pointers and UserData to NULL, and Name to NULL. Must be called before setting any fields.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hook</td><td>Pointer to hook structure to initialize. Must not be NULL. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
