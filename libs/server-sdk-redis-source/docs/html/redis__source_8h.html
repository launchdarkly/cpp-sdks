<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>C++ Server-Side SDK Redis Source: include/launchdarkly/server_side/bindings/c/integrations/redis/redis_source.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">C++ Server-Side SDK Redis Source
   </div>
   <div id="projectbrief">Provide SDK data via Redis</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_efe5b79025e5a9a1c6aba444011d94a7.html">launchdarkly</a></li><li class="navelem"><a class="el" href="dir_6116b7ba27d0fd02edf28913a08717c5.html">server_side</a></li><li class="navelem"><a class="el" href="dir_b299382a179c90fc9e35af074a86db98.html">bindings</a></li><li class="navelem"><a class="el" href="dir_a3622f2e180d25e687cdbf93ea7431f7.html">c</a></li><li class="navelem"><a class="el" href="dir_c4b47312853367a2eaeb1f1d4dede263.html">integrations</a></li><li class="navelem"><a class="el" href="dir_21e175127eea39a201c5bee93c35167d.html">redis</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">redis_source.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>LaunchDarkly Server-side Redis Source C Binding.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;launchdarkly/bindings/c/export.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for redis_source.h:</div>
<div class="dyncontent">
<div class="center"><img src="redis__source_8h__incl.png" border="0" usemap="#ainclude_2launchdarkly_2server__side_2bindings_2c_2integrations_2redis_2redis__source_8h" alt=""/></div>
</div>
</div>
<p><a href="redis__source_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structLDServerLazyLoadRedisResult.html">LDServerLazyLoadRedisResult</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores the result of calling LDDServerLazyLoadRedisSource_New.  <a href="structLDServerLazyLoadRedisResult.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a78472dbe65d384b7c4e639faf07134f8"><td class="memItemLeft" align="right" valign="top"><a id="a78472dbe65d384b7c4e639faf07134f8"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>LDSERVER_LAZYLOAD_REDISSOURCE_ERROR_MESSAGE_SIZE</b>&#160;&#160;&#160;256</td></tr>
<tr class="separator:a78472dbe65d384b7c4e639faf07134f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:aa3b6f62663182c7c87355deb4e20f730"><td class="memItemLeft" align="right" valign="top">typedef struct _LDServerLazyLoadRedisSource *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="redis__source_8h.html#aa3b6f62663182c7c87355deb4e20f730">LDServerLazyLoadRedisSource</a></td></tr>
<tr class="memdesc:aa3b6f62663182c7c87355deb4e20f730"><td class="mdescLeft">&#160;</td><td class="mdescRight">LDServerLazyLoadRedisSource represents a data source for the Server-Side SDK backed by Redis. It is meant to be used in place of the standard LaunchDarkly Streaming or Polling data sources.  <a href="redis__source_8h.html#aa3b6f62663182c7c87355deb4e20f730">More...</a><br /></td></tr>
<tr class="separator:aa3b6f62663182c7c87355deb4e20f730"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a292916a02304a2599b187b6c16c0de62"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="redis__source_8h.html#a292916a02304a2599b187b6c16c0de62">LDServerLazyLoadRedisSource_New</a> (char const *uri, char const *prefix, struct <a class="el" href="structLDServerLazyLoadRedisResult.html">LDServerLazyLoadRedisResult</a> *out_result)</td></tr>
<tr class="memdesc:a292916a02304a2599b187b6c16c0de62"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new Redis data source suitable for usage in the SDK's Lazy Load data system.  <a href="redis__source_8h.html#a292916a02304a2599b187b6c16c0de62">More...</a><br /></td></tr>
<tr class="separator:a292916a02304a2599b187b6c16c0de62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af596d0c20151bcd6aef4a3099b3ca361"><td class="memItemLeft" align="right" valign="top"><a id="af596d0c20151bcd6aef4a3099b3ca361"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="redis__source_8h.html#af596d0c20151bcd6aef4a3099b3ca361">LDServerLazyLoadRedisSource_Free</a> (<a class="el" href="redis__source_8h.html#aa3b6f62663182c7c87355deb4e20f730">LDServerLazyLoadRedisSource</a> source)</td></tr>
<tr class="memdesc:af596d0c20151bcd6aef4a3099b3ca361"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees a Redis data source pointer. Only necessary to call if not passing ownership to SDK configuration. <br /></td></tr>
<tr class="separator:af596d0c20151bcd6aef4a3099b3ca361"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>LaunchDarkly Server-side Redis Source C Binding. </p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a id="aa3b6f62663182c7c87355deb4e20f730"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3b6f62663182c7c87355deb4e20f730">&#9670;&nbsp;</a></span>LDServerLazyLoadRedisSource</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct _LDServerLazyLoadRedisSource* <a class="el" href="redis__source_8h.html#aa3b6f62663182c7c87355deb4e20f730">LDServerLazyLoadRedisSource</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>LDServerLazyLoadRedisSource represents a data source for the Server-Side SDK backed by Redis. It is meant to be used in place of the standard LaunchDarkly Streaming or Polling data sources. </p>
<p>Call <a class="el" href="redis__source_8h.html#a292916a02304a2599b187b6c16c0de62">LDServerLazyLoadRedisSource_New</a> to obtain a new instance. This instance can be passed into the SDK's DataSystem configuration via the LazyLoad builder.</p>
<p>Example: </p><div class="fragment"><div class="line"> <span class="comment">// Stack allocate the result struct, which will hold the result pointer or</span></div>
<div class="line"> <span class="comment">// an error message.</span></div>
<div class="line"> <span class="keyword">struct </span><a class="code" href="structLDServerLazyLoadRedisResult.html">LDServerLazyLoadRedisResult</a> result;</div>
<div class="line"> </div>
<div class="line"> <span class="comment">// Create the Redis source, passing in arguments for the URI, prefix, and</span></div>
<div class="line"> <span class="comment">// pointer to the result.</span></div>
<div class="line"> <span class="keywordflow">if</span> (!<a class="code" href="redis__source_8h.html#a292916a02304a2599b187b6c16c0de62">LDServerLazyLoadRedisSource_New</a>(<span class="stringliteral">&quot;redis://localhost:6379&quot;</span>, <span class="stringliteral">&quot;testprefix&quot;</span>,</div>
<div class="line">&amp;result)) {</div>
<div class="line">     <span class="comment">// On failure, you may print the error message (result.error_message),</span></div>
<div class="line">     <span class="comment">// then exit or return.</span></div>
<div class="line"> }</div>
<div class="line"> </div>
<div class="line"> <span class="comment">// Create a builder for the Lazy Load data system.</span></div>
<div class="line"> LDServerLazyLoadBuilder lazy_builder = LDServerLazyLoadBuilder_New();</div>
<div class="line"> </div>
<div class="line"> <span class="comment">// Pass the Redis source pointer into it.</span></div>
<div class="line"> LDServerLazyLoadBuilder_SourcePtr(lazy_builder, result.source);</div>
<div class="line"> </div>
<div class="line"> <span class="comment">// Create a standard server-side SDK configuration builder.</span></div>
<div class="line"> LDServerConfigBuilder cfg_builder = LDServerConfigBuilder_New(<span class="stringliteral">&quot;sdk-123&quot;</span>);</div>
<div class="line"> </div>
<div class="line"> <span class="comment">// Tell the SDK config builder to use the Lazy Load system that was just</span></div>
<div class="line"> <span class="comment">// configured.</span></div>
<div class="line"> LDServerConfigBuilder_DataSystem_LazyLoad(cfg_builder, lazy_builder);</div>
<div class="ttc" id="aredis__source_8h_html_a292916a02304a2599b187b6c16c0de62"><div class="ttname"><a href="redis__source_8h.html#a292916a02304a2599b187b6c16c0de62">LDServerLazyLoadRedisSource_New</a></div><div class="ttdeci">LDServerLazyLoadRedisSource_New(char const *uri, char const *prefix, struct LDServerLazyLoadRedisResult *out_result)</div><div class="ttdoc">Creates a new Redis data source suitable for usage in the SDK's Lazy Load data system.</div><div class="ttdef"><b>Definition:</b> redis_source.cpp:13</div></div>
<div class="ttc" id="astructLDServerLazyLoadRedisResult_html"><div class="ttname"><a href="structLDServerLazyLoadRedisResult.html">LDServerLazyLoadRedisResult</a></div><div class="ttdoc">Stores the result of calling LDDServerLazyLoadRedisSource_New.</div><div class="ttdef"><b>Definition:</b> redis_source.h:76</div></div>
</div><!-- fragment --><p>This implementation is backed by <a href="https://github.com/sewenew/redis-plus-plus">Redis++</a>, a C++ wrapper for the <a href="https://github.com/redis/hiredis">hiredis</a> library. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a292916a02304a2599b187b6c16c0de62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a292916a02304a2599b187b6c16c0de62">&#9670;&nbsp;</a></span>LDServerLazyLoadRedisSource_New()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LDServerLazyLoadRedisSource_New </td>
          <td>(</td>
          <td class="paramtype">char const *&#160;</td>
          <td class="paramname"><em>uri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char const *&#160;</td>
          <td class="paramname"><em>prefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structLDServerLazyLoadRedisResult.html">LDServerLazyLoadRedisResult</a> *&#160;</td>
          <td class="paramname"><em>out_result</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a new Redis data source suitable for usage in the SDK's Lazy Load data system. </p>
<p>In this system, the SDK will query Redis for flag/segment data as required, with an in-memory cache to reduce the number of queries.</p>
<p>Data is never written back to Redis.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">uri</td><td>Redis URI string. Must not be NULL or empty string.</td></tr>
    <tr><td class="paramname">prefix</td><td>Prefix to use when reading SDK data from Redis. This allows multiple SDK environments to coexist in the same database, or for the SDK's data to coexist with other unrelated data. Must not be NULL.</td></tr>
    <tr><td class="paramname">out_result</td><td>Pointer to struct where the source pointer or an error message should be stored.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if the source was created successfully; out_result-&gt;source will contain the pointer. The caller must either free the pointer with <a class="el" href="redis__source_8h.html#af596d0c20151bcd6aef4a3099b3ca361">LDServerLazyLoadRedisSource_Free</a>, OR pass it into the SDK's configuration methods which will take ownership (in which case do not call <a class="el" href="redis__source_8h.html#af596d0c20151bcd6aef4a3099b3ca361">LDServerLazyLoadRedisSource_Free</a>.) </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
